<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>AI-Powered Inventory Forecast</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; padding: 40px; color: #333; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h2 { color: #1a73e8; border-bottom: 3px solid #1a73e8; padding-bottom: 10px; margin-bottom: 5px; }
        .subtitle { color: #666; font-style: italic; margin-bottom: 25px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 18px; text-align: left; border-bottom: 1px solid #eee; }
        th { background-color: #1a73e8; color: white; text-transform: uppercase; font-size: 0.85em; letter-spacing: 1px; }
        tr:hover { background-color: #f8f9fa; }
        /* Style for the AI Prediction badge */
        .ai-badge { background: #e8f0fe; color: #1967d2; padding: 6px 12px; border-radius: 6px; font-weight: bold; border: 1px solid #c2d7fa; }
        /* Style for the Time to Zero forecast */
        .forecast-value { color: #d93025; font-weight: bold; font-size: 1.1em; }
        .learning-status { color: #9aa0a6; font-style: italic; }
    </style>
</head>
<body>
<div class="container">
    <h2>ðŸš€ Live AI Inventory Forecasting</h2>
    <p class="subtitle">Scikit-Learn Regression Engine (Python) â†” Kafka Stream â†” Spring Boot (Java)</p>

    <table>
        <thead>
        <tr>
            <th>Product SKU</th>
            <th>Current Stock Level</th>
            <th>AI Predicted Velocity</th>
            <th>Forecast (Time to Zero)</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item : ${items}">
            <td th:text="${item.sku}" style="font-weight: bold;">SKU</td>
            <td th:text="${item.quantity}">0</td>
            <td>
                        <span th:if="${item.aiVelocity != null and item.aiVelocity > 0}" class="ai-badge"
                              th:text="${#numbers.formatDecimal(item.aiVelocity, 1, 2)} + ' units/min'">
                        </span>
                <span th:unless="${item.aiVelocity != null and item.aiVelocity > 0}" class="learning-status">
                            ðŸ§  AI is learning...
                        </span>
            </td>
            <td>
                <div th:if="${item.aiVelocity != null and item.aiVelocity > 0}">
                            <span class="forecast-value"
                                  th:text="${#numbers.formatDecimal(item.quantity / item.aiVelocity, 1, 1)} + ' mins left'">
                            </span>
                </div>
                <div th:unless="${item.aiVelocity != null and item.aiVelocity > 0}">
                    <span class="learning-status">Waiting for trend...</span>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>